{% extends 'layout.html' %}
{% load static random_num %}

{% block layout-style %}
  <div class="d-flex flex-column flex-root" id="kt_app_root">
    <div class="d-flex flex-column flex-lg-row flex-column-fluid">
      <!-- Body -->
      <div class="d-flex flex-column flex-lg-row-fluid w-lg-50 p-10 order-2 order-lg-1">
        <div class="d-flex flex-center flex-column flex-lg-row-fluid">
          <div class="w-lg-500px p-10">
            <form class="form w-100" novalidate="novalidate" id="kt_sign_in_form" method="POST" action="#">
              {% csrf_token %}
              <div class="text-center mb-11">
                <h1 class="text-dark fw-bolder mb-3">Entre</h1>
                <div class="text-gray-500 fw-semibold fs-6">Acesse a área residente</div>
              </div>
              {% if form.non_field_errors %}
                <div class="alert alert-dismissible bg-danger d-flex flex-column flex-sm-row p-5 mb-10">
                  <span class="svg-icon svg-icon-2hx svg-icon-light me-4 mb-5 mb-sm-0">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path opacity="0.3" d="M2 4V16C2 16.6 2.4 17 3 17H13L16.6 20.6C17.1 21.1 18 20.8 18 20V17H21C21.6 17 22 16.6 22 16V4C22 3.4 21.6 3 21 3H3C2.4 3 2 3.4 2 4Z" fill="currentColor"></path>
                      <path d="M18 9H6C5.4 9 5 8.6 5 8C5 7.4 5.4 7 6 7H18C18.6 7 19 7.4 19 8C19 8.6 18.6 9 18 9ZM16 12C16 11.4 15.6 11 15 11H6C5.4 11 5 11.4 5 12C5 12.6 5.4 13 6 13H15C15.6 13 16 12.6 16 12Z" fill="currentColor"></path>
                    </svg>
                  </span>
                  <div class="d-flex flex-column text-light pe-0 pe-sm-10">
                    <h4 class="mb-2 text-light">Desculpe, houve um problema!</h4>
                    <span>Seu usuário e/ou senha podem estar incorretos.</span>
                  </div>

                  <button type="button" class="position-absolute position-sm-relative m-2 m-sm-0 top-0 end-0 btn btn-icon ms-sm-auto" data-bs-dismiss="alert">
                    <span class="svg-icon svg-icon-2x svg-icon-light">
                      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect opacity="0.5" x="6" y="17.3137" width="16" height="2" rx="1" transform="rotate(-45 6 17.3137)" fill="currentColor"></rect>
                        <rect x="7.41422" y="6" width="16" height="2" rx="1" transform="rotate(45 7.41422 6)" fill="currentColor"></rect>
                      </svg>
                    </span>
                  </button>
                </div>
              {% endif %}
              <div class="fv-row mb-8 fv-plugins-icon-container fv-plugins-bootstrap5-row-valid">
                <input type="text" placeholder="Username" name="username" autocomplete="off" class="form-control bg-transparent" />
                <div class="fv-plugins-message-container invalid-feedback">{{ form.username.errors }}</div>
              </div>
              <div class="fv-row mb-3 fv-plugins-icon-container fv-plugins-bootstrap5-row-valid">
                <input type="password" placeholder="Password" name="password" autocomplete="off" class="form-control bg-transparent" />
                <div class="fv-plugins-message-container invalid-feedback">{{ form.password.errors }}</div>
              </div>
              <div class="d-flex flex-stack flex-wrap gap-3 fs-base fw-semibold mb-8">
                <div></div>
                <a href="{% url 'password_reset' %}" class="link-primary">Esqueceu a senha?</a>
              </div>
              <div class="row mb-10">
                <div class="col">
                  <button type="submit" id="kt_sign_in_submit" class="btn btn-primary w-100">
                    <span class="indicator-label">Acesse</span>
                    <span class="indicator-progress">Espere...
                    <span class="spinner-border spinner-border-sm align-middle ms-2"></span></span>
                  </button>
                </div>
                <div class="col">
                  <a href="{% url 'home' %}" class="btn btn-bg-secondary btn-color-gray-700 btn-active-text-primary w-100">Voltar</a>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
      <!-- Aside -->
      {% random_num 2 as rand %}
      <div class="d-flex flex-lg-row-fluid w-lg-50 bgi-size-cover bgi-position-center order-1 order-lg-2"
           {% if rand %}
           style="background-image: url({% static 'media/login/logm.png' %})"
           {% else %}
           style="background-image: url({% static 'media/login/logw.png' %})"
           {% endif %}
           >
      </div>
    </div>
  </div>
{% endblock layout-style %}
